---
// src/pages/blog/[id].astro
import { getCollection, render } from "astro:content";
import BlogPostShell from "../../components/blog/BlogPostShell.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");

  return posts
    .filter((p) => (import.meta.env.PROD ? !p.data.draft : true))
    .map((post) => ({
      params: { id: post.id },
      props: { post }
    }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<BlogPostShell title={post.data.title} description={post.data.description} pubDate={post.data.pubDate} tags={post.data.tags}>
  <Content />
</BlogPostShell>
