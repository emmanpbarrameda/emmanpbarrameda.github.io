---
import { twMerge } from "tailwind-merge";
const { title, org, date, notes, href, className } = Astro.props;
---

<li class={twMerge("rounded-lg bg-gradient-to-t from-neutral-900/40 via-75% px-4 py-4", "border border-neutral-800/70 hover:border-neutral-700 transition", "opacity-0 intersect:opacity-100 intersect:duration-700 intersect:animate-in intersect:fade-in-0", className)}>
  <header class="grid grid-cols-1 gap-2 sm:grid-cols-[1fr_auto]">
    <div class="min-w-0">
      <h4 class="break-words text-base font-semibold leading-tight tracking-tight">
        {
          href ? (
            <a href={href} target="_blank" rel="noopener noreferrer" class="underline-offset-2 hover:underline focus:outline-none">
              {title}
            </a>
          ) : (
            title
          )
        }
        {org && <span class="hidden sm:inline text-neutral-400"> Â· {org}</span>}
      </h4>

      <!-- on mobile -->
      {org && <p class="sm:hidden mt-0.5 text-sm text-neutral-400">{org}</p>}
    </div>

    <!-- Right side: date + optional icon -->
    <div class="flex items-center justify-start gap-2 sm:justify-end">
      {date && <span class="shrink-0 text-xs font-jetbrains text-neutral-500 leading-tight">{date}</span>}

      {
        href && (
          <a href={href} target="_blank" rel="noopener noreferrer" aria-label="Open link in new tab" title="Open link in new tab" class="inline-flex items-center text-neutral-500 hover:text-sky-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40 rounded transition">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" class="shrink-0" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10 6H6C4.895 6 4 6.895 4 8v10c0 1.105.895 2 2 2h10c1.105 0 2-.895 2-2v-4" />
              <path d="M14 4h6v6" />
              <path d="M20 4L10 14" />
            </svg>
          </a>
        )
      }
    </div>
  </header>

  {notes && <p class="mt-1 text-sm text-neutral-400">{notes}</p>}
</li>
