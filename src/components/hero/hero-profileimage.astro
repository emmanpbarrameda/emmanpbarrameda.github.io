---
// file: src\components\hero\hero-profileimage.astro
const sliderImages = [
  { src: "/images/about_slider1.webp", alt: "emmanpbarrameda" },
  { src: "/images/about_slider2.webp", alt: "emmanpbarrameda" },
  { src: "/images/about_slider4.webp", alt: "emmanpbarrameda" },
  { src: "/images/about_slider5.webp", alt: "emmanpbarrameda" }
];
---

<div class="flex w-full justify-center md:w-1/2 md:justify-end order-1 md:order-2 mt-8 mb-0 md:my-0 animate-in fade-in-0 slide-in-from-right-12">
  <div class="relative group">
    <!-- Outer glow -->
    <div class="absolute -inset-2 bg-gradient-to-br from-sky-400 via-cyan-500 to-blue-600 rounded-full blur-xl opacity-25 group-hover:opacity-50 transition duration-500"></div>

    <!-- Main bubble image -->
    <div class="relative h-64 w-64 md:h-80 md:w-80 lg:h-96 lg:w-96 rounded-full shadow-2xl bg-black/5 backdrop-blur-sm border border-sky-500/10 group-hover:shadow-sky-500/20 transition-all duration-700 overflow-hidden bubble-container">
      <!-- First image loads immediately (LCP) -->
      <img src={sliderImages[0].src} alt={sliderImages[0].alt} class="slider-image absolute inset-0 h-full w-full object-cover transition-all duration-500 rounded-full" draggable="false" fetchpriority="high" />

      <!-- Other images lazy load -->
      {sliderImages.slice(1).map((image) => <img src="" data-src={image.src} alt={image.alt} class="slider-image absolute inset-0 h-full w-full object-cover transition-all duration-500 rounded-full" draggable="false" loading="lazy" />)}
    </div>

    <!-- Animated pulse ring -->
    <div class="absolute inset-0 rounded-full border-2 border-sky-400/10 animate-ping [animation-duration:3s]"></div>

    <!-- Animated floating accents -->
    <div class="absolute -bottom-4 -right-4 text-sky-400 text-xl font-bold z-10 animate-float select-none">&lt;/&gt;</div>
    <div class="absolute -top-4 -left-4 text-blue-500 text-lg font-bold z-10 animate-float-delay select-none">&lt;/&gt;</div>
    <div class="absolute top-2 left-[30%] text-cyan-400 text-lg font-bold z-10 animate-float select-none">&lt;/&gt;</div>
    <div class="absolute top-[25%] right-0 text-indigo-400 text-base font-bold z-10 animate-float-delay select-none">&lt;/&gt;</div>
    <div class="absolute bottom-[30%] left-3 text-blue-300 text-sm font-bold z-10 animate-float select-none">&lt;/&gt;</div>
    <div class="absolute bottom-4 right-[40%] text-sky-300 text-lg font-bold z-10 animate-float-delay select-none">&lt;/&gt;</div>
    <div class="absolute top-[60%] left-[60%] text-cyan-300 text-base font-bold z-10 animate-float select-none">&lt;/&gt;</div>

    <style is:inline>
      .slider-image {
        opacity: 0;
        pointer-events: none;
        user-select: none;
        -webkit-user-select: none;
        -webkit-touch-callout: none;
        -webkit-user-drag: none;
        will-change: opacity;
      }

      .slider-image.active {
        animation: fadeCycle 12s ease-in-out infinite;
      }

      .slider-image:nth-of-type(1).active {
        animation-delay: 0s;
      }
      .slider-image:nth-of-type(2).active {
        animation-delay: 3s;
      }
      .slider-image:nth-of-type(3).active {
        animation-delay: 6s;
      }
      .slider-image:nth-of-type(4).active {
        animation-delay: 9s;
      }

      @keyframes fadeCycle {
        0% {
          opacity: 1;
        }
        20% {
          opacity: 1;
        }
        25% {
          opacity: 0;
        }
        100% {
          opacity: 0;
        }
      }

      .bubble-container:hover .slider-image {
        animation-play-state: paused;
      }

      .animate-float {
        animation: float 4s ease-in-out infinite;
      }
      .animate-float-delay {
        animation: float-delay 4s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      @keyframes float-delay {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
    </style>

    <script is:inline>
      (function () {
        const container = document.currentScript?.parentElement?.querySelector(".bubble-container");
        if (!container) return;

        const images = container.querySelectorAll(".slider-image");
        const block = (e) => e.preventDefault();

        container.addEventListener("contextmenu", block, { passive: false });
        container.addEventListener("dragstart", block, { passive: false });

        // Activate first image immediately
        images[0]?.classList.add("active");

        // Lazy load other images after a short delay
        setTimeout(() => {
          images.forEach((img, index) => {
            if (index === 0) return;

            const dataSrc = img.getAttribute("data-src");
            if (dataSrc) {
              const preload = new Image();
              preload.onload = () => {
                img.src = dataSrc;
                img.classList.add("active");
              };
              preload.src = dataSrc;
            }
          });
        }, 1000);
      })();
    </script>
  </div>
</div>
